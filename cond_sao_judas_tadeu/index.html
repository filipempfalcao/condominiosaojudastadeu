{% extends 'base.html' %}

{% block title %}Dashboard - Condomínio São Judas Tadeu{% endblock %}

{% block content %}
<div class="container">
  <h1 class="page-title">Dashboard</h1>
  
  {% for category, message in get_flashed_messages(with_categories=true) %}
  <div class="alert alert-{{ category }}">{{ message }}</div>
  {% endfor %}
  
  <div class="filters">
    <div class="filter-item">
      <label for="periodo-select">Período</label>
      <select id="periodo-select">
        <option value="ultimos_7_dias">Últimos 7 dias</option>
        <option value="ultimos_30_dias" selected>Últimos 30 dias</option>
        <option value="ultimos_90_dias">Últimos 90 dias</option>
        <option value="ultimos_6_meses">Últimos 6 meses</option>
        <option value="ultimo_ano">Último ano</option>
        <option value="todos">Todo o período</option>
      </select>
    </div>
  </div>
  
  <div class="dashboard-indicators" id="indicadores-container">
    <div class="indicator-card" id="total-demandas">
      <div class="indicator-value">0</div>
      <div class="indicator-label">Total de Demandas</div>
      <div class="indicator-variation">0%</div>
    </div>
    
    <div class="indicator-card" id="demandas-abertas">
      <div class="indicator-value">0</div>
      <div class="indicator-label">Demandas Abertas</div>
      <div class="indicator-variation">0%</div>
    </div>
    
    <div class="indicator-card" id="tempo-medio-resolucao">
      <div class="indicator-value">0 dias</div>
      <div class="indicator-label">Tempo Médio de Resolução</div>
      <div class="indicator-variation">0%</div>
    </div>
    
    <div class="indicator-card" id="taxa-resolucao">
      <div class="indicator-value">0%</div>
      <div class="indicator-label">Taxa de Resolução</div>
      <div class="indicator-variation">0%</div>
    </div>
  </div>
  
  <div class="chart-container">
    <h3 class="chart-title">Demandas por Status, Categoria e Evolução</h3>
    <div id="grafico-unificado" style="width: 100%; height: 500px;"></div>
  </div>
  
  <div class="actions">
    <a href="{{ url_for('demandas.list') }}" class="btn btn-primary">Ver Demandas</a>
    <a href="{{ url_for('demandas.nova') }}" class="btn btn-success">Nova Demanda</a>
  </div>
</div>

<!-- Incluir script específico do dashboard -->
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}
